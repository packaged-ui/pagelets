!function(){"use strict";class e{static get xhrClass(){return e._XHR||XMLHttpRequest}static set xhrClass(t){e._XHR=t}static get GET(){return"get"}static get POST(){return"post"}static get PUT(){return"put"}static get DELETE(){return"delete"}constructor(t){this.url=t,this.method=e.GET,this.data={},this.headers={},this.responseType=null,this.eventCallback=null}setUrl(e){return this.url=e,this}setMethod(e){return this.method=e,this}setData(e){return this.data=e,this}setHeaders(e){return this.headers=e,this}setResponseType(e){return this.responseType=e,this}setEventCallback(e){return this.eventCallback=e,this}send(){return new Promise((t,n)=>{const r=new e.xhrClass;let a;if(this.eventCallback&&(r.addEventListener("loadstart",this.eventCallback),r.addEventListener("load",this.eventCallback),r.addEventListener("loadend",this.eventCallback),r.addEventListener("progress",this.eventCallback),r.addEventListener("error",this.eventCallback),r.addEventListener("abort",this.eventCallback)),r.addEventListener("load",(function(){t(r)})),r.addEventListener("error",(function(){n(r)})),r.addEventListener("abort",(function(){n(r)})),this.responseType&&(r.responseType=this.responseType),"object"!=typeof this.data||this.data instanceof FormData)a=this.data;else{a=new FormData;for(let e in this.data)this.data.hasOwnProperty(e)&&a.append(e,this.data[e])}if(r.open(this.method,this.url,!0),this.headers)for(let e in this.headers)this.headers.hasOwnProperty(e)&&r.setRequestHeader(e,this.headers[e]);r.send(a)})}}var t=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){
/*!
   * History API JavaScript Library v4.2.10
   *
   * Support: IE8+, FF3+, Opera 9+, Safari, Chrome and other
   *
   * Copyright 2011-2018, Dmitrii Pakhtinov ( spb.piksel@gmail.com )
   *
   * http://spb-piksel.ru/
   *
   * MIT license:
   *   http://www.opensource.org/licenses/mit-license.php
   *
   * Update: 2018-04-15 13:54
   */
e.exports=function(){var e=("object"==typeof window?window:this)||{};if(!e.history||"emulate"in e.history)return e.history;var t,n,r=e.document,a=r.documentElement,i=e.Object,s=e.JSON,o=e.location,l=e.history,c=l,u=l.pushState,p=l.replaceState,h=(-1===(n=e.navigator.userAgent).indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&!!u,f="state"in l,d=i.defineProperty,g=M({},"t")?{}:r.createElement("a"),v="",E=e.addEventListener?"addEventListener":(v="on")&&"attachEvent",_=e.removeEventListener?"removeEventListener":"detachEvent",m=e.dispatchEvent?"dispatchEvent":"fireEvent",y=H(e[E]),b=H(e[_]),x=H(e[m]),R={basepath:"/",redirect:0,type:"/",init:0},w=r.createElement("a"),T=o.href,P="",S=1,O=!1,L=0,A={},C={},I=r.title,k={onhashchange:null,onpopstate:null},D=function(t,n){var r=e.history!==l;r&&(e.history=l),t.apply(l,n),r&&(e.history=c)},U={setup:function(e,t,n){R.basepath=(""+(null==e?R.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),R.type=null==t?R.type:t,R.redirect=null==n?R.redirect:!!n},redirect:function(t,n){if(c.setup(n,t),n=R.basepath,e.top==e.self){var r=q(null,!1,!0)._relative,a=o.pathname+o.search;h?(a=a.replace(/([^\/])$/,"$1/"),r!=n&&new RegExp("^"+n+"$","i").test(a)&&o.replace(r)):a!=n&&(a=a.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+n,"i").test(a)&&o.replace(n+"#"+a.replace(new RegExp("^"+n,"i"),R.type)+o.hash))}},pushState:function(e,t,n){var a=r.title;null!=I&&(r.title=I),u&&D(u,arguments),V(e,n),r.title=a,I=t},replaceState:function(e,t,n){var a=r.title;null!=I&&(r.title=I),delete A[o.href],p&&D(p,arguments),V(e,n,!0),r.title=a,I=t},location:{set:function(t){0===L&&(L=1),e.location=t},get:function(){return 0===L&&(L=1),g}},state:{get:function(){return"object"==typeof A[o.href]?s.parse(s.stringify(A[o.href])):void 0!==A[o.href]?A[o.href]:null}}},j={assign:function(e){h||0!==(""+e).indexOf("#")?o.assign(e):V(null,e)},reload:function(e){o.reload(e)},replace:function(e){h||0!==(""+e).indexOf("#")?o.replace(e):V(null,e,!0)},toString:function(){return this.href},origin:{get:function(){return void 0!==t?t:o.origin?o.origin:o.protocol+"//"+o.hostname+(o.port?":"+o.port:"")},set:function(e){t=e}},href:h?null:{get:function(){return q()._href}},protocol:null,host:null,hostname:null,port:null,pathname:h?null:{get:function(){return q()._pathname}},search:h?null:{get:function(){return q()._search}},hash:h?null:{set:function(e){V(null,(""+e).replace(/^(#|)/,"#"),!1,T)},get:function(){return q()._hash}}};function N(){}function q(e,t,n){if(null==e||""===e||t)e=t?e:o.href,h&&!n||(e=e.replace(/^[^#]*/,"")||"#",e=o.protocol.replace(/:.*$|$/,":")+"//"+o.host+R.basepath+e.replace(new RegExp("^#[/]?(?:"+R.type+")?"),""));else{var a=q(),i=r.getElementsByTagName("base")[0];!n&&i&&i.getAttribute("href")&&(i.href=i.href,a=q(i.href,null,!0));var s=a._pathname,l=a._protocol;e=/^(?:\w+\:)?\/\//.test(e=""+e)?0===e.indexOf("/")?l+e:e:l+"//"+a._host+(0===e.indexOf("/")?e:0===e.indexOf("?")?s+e:0===e.indexOf("#")?s+a._search+e:s.replace(/[^\/]+$/g,"")+e)}w.href=e;var c=/(?:([a-zA-Z0-9\-]+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(w.href),u=c[2]+(c[3]?":"+c[3]:""),p=c[4]||"/",f=c[5]||"",d="#"===c[6]?"":c[6]||"",g=p+f+d,v=p.replace(new RegExp("^"+R.basepath,"i"),R.type)+f;return{_href:c[1]+"//"+u+g,_protocol:c[1],_host:u,_hostname:c[2],_port:c[3]||"",_pathname:p,_search:f,_hash:d,_relative:g,_nohash:v,_special:v+d}}function H(t){return t&&e&&e.EventTarget&&"function"==typeof e.EventTarget.prototype.addEventListener&&"function"==typeof t.bind?t.bind(e):t}function M(t,n,r,a){var s=0;r||(r={set:N},s=1);var o=!r.set,l=!r.get,c={configurable:!0,set:function(){o=1},get:function(){l=1}};try{d(t,n,c),t[n]=t[n],d(t,n,r)}catch(e){}if(!(o&&l||(t.__defineGetter__&&(t.__defineGetter__(n,c.get),t.__defineSetter__(n,c.set),t[n]=t[n],r.get&&t.__defineGetter__(n,r.get),r.set&&t.__defineSetter__(n,r.set)),o&&l))){if(s)return!1;if(t===e){try{var u=t[n];t[n]=null}catch(e){}if("execScript"in e)e.execScript("Public "+n,"VBScript"),e.execScript("var "+n+";","JavaScript");else try{d(t,n,{value:N})}catch(e){"onpopstate"===n&&(y("popstate",r=function(){b("popstate",r,!1);var e=t.onpopstate;t.onpopstate=null,setTimeout((function(){t.onpopstate=e}),1)},!1),S=0)}t[n]=u}else try{try{var p=i.create(t);for(var h in d(i.getPrototypeOf(p)===t?p:t,n,r),t)"function"==typeof t[h]&&(p[h]=t[h].bind(t));try{a.call(p,p,t)}catch(e){}t=p}catch(e){d(t.constructor.prototype,n,r)}}catch(e){return!1}}return t}function $(e,t,n){return e=e===j?o:e,(n=n||{}).set=n.set||function(n){e[t]=n},n.get=n.get||function(){return e[t]},n}function G(t,n){var r=(""+("string"==typeof t?t:t.type)).replace(/^on/,""),a=C[r];if(a){if(null==(n="string"==typeof t?n:t).target)for(var i=["target","currentTarget","srcElement","type"];t=i.pop();)n=M(n,t,{get:"type"===t?function(){return r}:function(){return e}});S&&(("popstate"===r?e.onpopstate:e.onhashchange)||N).call(e,n);for(var s=0,o=a.length;s<o;s++)a[s].call(e,n);return!0}return x(t,n)}function B(){var e=r.createEvent?r.createEvent("Event"):r.createEventObject();e.initEvent?e.initEvent("popstate",!1,!1):e.type="popstate",e.state=c.state,G(e)}function V(e,t,n,r){if(h)T=o.href;else{0===L&&(L=2);var a=q(t,2===L&&-1!==(""+t).indexOf("#"));a._relative!==q()._relative&&(T=r,n?o.replace("#"+a._special):o.hash=a._special)}!f&&e&&(A[o.href]=e),O=!1}function z(t){var n=T;if(T=o.href,n){P!==o.href&&B(),t=t||e.event;var r=q(n,!0),a=q();t.oldURL||(t.oldURL=r._href,t.newURL=a._href),r._hash!==a._hash&&G(t)}}function X(e){setTimeout((function(){y("popstate",(function(e){P=o.href,f||(e=M(e,"state",{get:function(){return c.state}})),G(e)}),!1)}),0),!h&&!0!==e&&"location"in c&&(J(g.hash),O&&(O=!1,B()))}function F(t){var n=t||e.event,r=function(e){for(;e;){if("A"===e.nodeName)return e;e=e.parentNode}}(n.target||n.srcElement),a="defaultPrevented"in n?n.defaultPrevented:!1===n.returnValue;if(r&&"A"===r.nodeName&&!a){var i=q(),s=q(r.getAttribute("href",2));i._href.split("#").shift()===s._href.split("#").shift()&&s._hash&&(i._hash!==s._hash&&(g.hash=s._hash),J(s._hash),n.preventDefault?n.preventDefault():n.returnValue=!1)}}function J(t){var n=r.getElementById(t=(t||"").replace(/^#/,""));if(n&&n.id===t&&"A"===n.nodeName){var i=n.getBoundingClientRect();e.scrollTo(a.scrollLeft||0,i.top+(a.scrollTop||0)-(a.clientTop||0))}}return function(){var t=r.getElementsByTagName("script"),n=(t[t.length-1]||{}).src||"";(-1!==n.indexOf("?")?n.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,(function(e,t,n){R[t]=(n||"").replace(/^(0|false)$/,"")})),y(v+"hashchange",z,!1);var a=[j,g,k,e,U,c];f&&delete U.state;for(var i=0;i<a.length;i+=2)for(var l in a[i])if(a[i].hasOwnProperty(l))if("object"!=typeof a[i][l])a[i+1][l]=a[i][l];else{var u=$(a[i],l,a[i][l]);if(!M(a[i+1],l,u,(function(t,n){n===c&&(e.history=c=a[i+1]=t)})))return b(v+"hashchange",z,!1),!1;a[i+1]===e&&(C[l]=C[l.substr(2)]=[])}return c.setup(),R.redirect&&c.redirect(),R.init&&(L=1),!f&&s&&function(){var t;try{(t=e.sessionStorage).setItem("__historyAPI__t","1"),t.removeItem("__historyAPI__t")}catch(e){t={getItem:function(e){var t=r.cookie.split(e+"=");return t.length>1&&t.pop().split(";").shift()||"null"},setItem:function(e,t){var n={};(n[o.href]=c.state)&&(r.cookie=e+"="+s.stringify(n))}}}try{A=s.parse(t.getItem("__historyAPI__"))||{}}catch(e){A={}}y(v+"unload",(function(){t.setItem("__historyAPI__",s.stringify(A))}),!1)}(),h||r[E](v+"click",F,!1),"complete"===r.readyState?X(!0):(h||q()._relative===R.basepath||(O=!0),y(v+"load",X,!1)),!0}()?(c.emulate=!h,e[E]=function(e,t,n){e in C?C[e].push(t):arguments.length>3?y(e,t,n,arguments[3]):y(e,t,n)},e[_]=function(e,t,n){var r=C[e];if(r){for(var a=r.length;a--;)if(r[a]===t){r.splice(a,1);break}}else b(e,t,n)},e[m]=G,c):void 0}()}));const n=t.location||window.location,r={PREPARE:"prepare",PROGRESS:"progress",REQUESTED:"requested",RETRIEVED:"retrieved",RENDERED:"rendered",COMPLETE:"complete",CANCELLED:"cancelled",ERROR:"error"},a="",i="requested",s="loading",o="loaded",l="refreshing",c="error",u={selector:"[data-uri],[data-target]",defaultTarget:null,allowPersistentTargets:!0,listenElement:document};let p=Object.assign({},u);function h(t){return t=function(e){return e.targetElement=e.targetElement||_(p.defaultTarget),e}(t),new Promise((u,p)=>{const h=m(t.targetElement),g=h.getAttribute("id")||"";d(h,i),E(h,r.PREPARE)?((new e).setUrl(t.url).setMethod(t.method||(t.data?e.POST:e.GET)).setHeaders({"x-requested-with":"XMLHttpRequest","x-pagelet-request":"1","x-pagelet-target":g}).setEventCallback(e=>{switch(e.type){case"loadstart":d(h,h.dataset.selfUri===t.url?l:s);break;case"progress":E(h,r.PROGRESS);break;case"abort":d(h,a),E(h,r.CANCELLED);break;case"error":console.log(e),d(h,c),E(h,r.ERROR)}}).setData(t.data).send().then(e=>{d(h,o);const a=function(e){const t=e.getResponseHeader("content-type");let[n]=t.split(";");const r=e.responseText.replace(/^while\(1\);|for\(;;\);|\)]}'/,"");switch(n){case"":case"text/plain":case"text/html":return{contentType:n||"text/plain",content:r};case"application/json":case"application/javascript":const e=JSON.parse(r);return e.contentType="text/html",e;default:throw"not a valid response"}}(e),i={request:t,response:a};if(E(h,r.RETRIEVED,i)&&(!function(e,t){switch(t.contentType){case"text/plain":e.textContent=t.content;break;case"text/html":e.innerHTML=t.content}E(e,r.RENDERED,{response:t})&&f(e)}(h,a),E(h,r.COMPLETE,i)),a.location)a.location.reloadWindow?a.location.replaceHistory?n.replace(a.location.url):n.assign(a.location.url):v(h,a.location.url,t.url,a.location.replaceHistory);else{let e=t.pushUrl||(t.sourceElement?t.sourceElement.getAttribute("href"):null);e&&v(h,e,t.url,!1)}u(i)}).then(()=>{h.dataset.selfUri=t.url,d(h,a)}),E(h,r.REQUESTED)):p("prepare was cancelled")})}function f(e){(e=e||p.listenElement).querySelectorAll("[data-self-uri]").forEach(e=>{e.initialized||(e.initialized=!0,h({url:e.getAttribute("data-self-uri"),sourceElement:e,targetElement:e}))})}function d(e,t){t?e.setAttribute("data-pagelet-state",t):e.removeAttribute("data-pagelet-state")}const g={};function v(e,n,r,a){if(n&&"#"===n)return;(e=m(e)).pageletId=e.pageletId||function(e){let t="";for(;t.length<e;)t+=parseInt(Math.random().toFixed(16).slice(2,19)).toString(36);return t.slice(0,e)}(36),g[e.pageletId]=e;const i={targetPageletId:e.pageletId,targetId:e.getAttribute("id"),pushUrl:n,ajaxUrl:r};a?t.replaceState(i,null,n):t.pushState(i,null,n)}function E(e,t,n={}){return e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}))}function _(e){return e?"#"+e:"body"}function m(e){return e instanceof Element?e:p.listenElement.querySelector(e)}window.addEventListener("popstate",e=>{const t=e.state;if(t){let e;g[t.targetPageletId]&&p.listenElement.contains(g[t.targetPageletId])?e=g[t.targetPageletId]:p.allowPersistentTargets&&(e=p.listenElement.querySelector("#"+t.targetId)),e?h({url:t.ajaxUrl,targetElement:e}):n.replace(t.pushUrl)}else n.reload()});var y=Object.freeze({__proto__:null,events:r,init:function(e={}){p=Object.assign({},u,e),p.listenElement.addEventListener("click",e=>{if(e.target instanceof Element){const t=e.target.closest(p.selector);t&&(e.preventDefault(),h({url:t.getAttribute("data-uri")||t.getAttribute("href"),pushUrl:t.getAttribute("href"),sourceElement:t,targetElement:_(t.getAttribute("data-target"))}))}}),"complete"===document.readyState?f():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&f()})},load:h});window.Pagelets=y}();
