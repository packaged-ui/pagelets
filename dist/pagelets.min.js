!function(){"use strict";class e{get xhrClass(){return this._xhrClass||e._XHR||XMLHttpRequest}static set xhrClass(t){e._XHR=t}static get GET(){return"get"}static get POST(){return"post"}static get PUT(){return"put"}static get DELETE(){return"delete"}constructor(t,n){this.url=t,this.method=e.GET,this.data={},this.headers={},this.responseType=null,this.downloadEventCallback=null,this.uploadEventCallback=null,this.withCredentials=null,this._xhr=null,this._xhrClass=n}setUrl(e){return this.url=e,this}setMethod(e){return this.method=e,this}setData(e){return this.data=e,this}setHeaders(e){return this.headers=e,this}setResponseType(e){return this.responseType=e,this}setEventCallback(e,t){return this.downloadEventCallback=e,this.uploadEventCallback=t,this}setWithCredentials(e){return this.withCredentials=e,this}send(){const e=this;return new Promise((t,n)=>{const r=this._xhr=new this.xhrClass;let a;if(this.downloadEventCallback&&(r.addEventListener("loadstart",this.downloadEventCallback),r.addEventListener("load",this.downloadEventCallback),r.addEventListener("loadend",this.downloadEventCallback),r.addEventListener("progress",this.downloadEventCallback),r.addEventListener("error",this.downloadEventCallback),r.addEventListener("abort",this.downloadEventCallback)),this.uploadEventCallback&&(r.addEventListener("loadstart",this.uploadEventCallback),r.addEventListener("load",this.uploadEventCallback),r.addEventListener("loadend",this.uploadEventCallback),r.addEventListener("progress",this.uploadEventCallback),r.addEventListener("error",this.uploadEventCallback),r.addEventListener("abort",this.uploadEventCallback)),r.addEventListener("load",()=>{e._xhr=null,t(r)}),r.addEventListener("error",()=>{e._xhr=null,n(r)}),r.addEventListener("abort",()=>{e._xhr=null,n(r)}),this.responseType&&(r.responseType=this.responseType),"object"!=typeof this.data||this.data instanceof FormData)a=this.data;else{a=new FormData;for(let e in this.data)this.data.hasOwnProperty(e)&&a.append(e,this.data[e])}if(r.open(this.method,this.url,!0),this.withCredentials&&(r.withCredentials=this.withCredentials),this.headers)for(let e in this.headers)this.headers.hasOwnProperty(e)&&r.setRequestHeader(e,this.headers[e]);r.send(a)})}abort(){this._xhr&&this._xhr.abort&&this._xhr.abort()}}var t=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e,t){
/*!
   * History API JavaScript Library v4.2.10
   *
   * Support: IE8+, FF3+, Opera 9+, Safari, Chrome and other
   *
   * Copyright 2011-2018, Dmitrii Pakhtinov ( spb.piksel@gmail.com )
   *
   * http://spb-piksel.ru/
   *
   * MIT license:
   *   http://www.opensource.org/licenses/mit-license.php
   *
   * Update: 2018-04-15 13:54
   */
e.exports=function(){var e=("object"==typeof window?window:this)||{};if(!e.history||"emulate"in e.history)return e.history;var t,n,r=e.document,a=r.documentElement,s=e.Object,i=e.JSON,o=e.location,l=e.history,c=l,u=l.pushState,h=l.replaceState,d=(-1===(n=e.navigator.userAgent).indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&!!u,p="state"in l,f=s.defineProperty,g=N({},"t")?{}:r.createElement("a"),E="",v=e.addEventListener?"addEventListener":(E="on")&&"attachEvent",m=e.removeEventListener?"removeEventListener":"detachEvent",b=e.dispatchEvent?"dispatchEvent":"fireEvent",y=H(e[v]),_=H(e[m]),w=H(e[b]),R={basepath:"/",redirect:0,type:"/",init:0},T=r.createElement("a"),x=o.href,L="",C=1,O=!1,P=0,A={},S={},k=r.title,I={onhashchange:null,onpopstate:null},j=function(t,n){var r=e.history!==l;r&&(e.history=l),t.apply(l,n),r&&(e.history=c)},q={setup:function(e,t,n){R.basepath=(""+(null==e?R.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),R.type=null==t?R.type:t,R.redirect=null==n?R.redirect:!!n},redirect:function(t,n){if(c.setup(n,t),n=R.basepath,e.top==e.self){var r=U(null,!1,!0)._relative,a=o.pathname+o.search;d?(a=a.replace(/([^\/])$/,"$1/"),r!=n&&new RegExp("^"+n+"$","i").test(a)&&o.replace(r)):a!=n&&(a=a.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+n,"i").test(a)&&o.replace(n+"#"+a.replace(new RegExp("^"+n,"i"),R.type)+o.hash))}},pushState:function(e,t,n){var a=r.title;null!=k&&(r.title=k),u&&j(u,arguments),F(e,n),r.title=a,k=t},replaceState:function(e,t,n){var a=r.title;null!=k&&(r.title=k),delete A[o.href],h&&j(h,arguments),F(e,n,!0),r.title=a,k=t},location:{set:function(t){0===P&&(P=1),e.location=t},get:function(){return 0===P&&(P=1),g}},state:{get:function(){return"object"==typeof A[o.href]?i.parse(i.stringify(A[o.href])):void 0!==A[o.href]?A[o.href]:null}}},D={assign:function(e){d||0!==(""+e).indexOf("#")?o.assign(e):F(null,e)},reload:function(e){o.reload(e)},replace:function(e){d||0!==(""+e).indexOf("#")?o.replace(e):F(null,e,!0)},toString:function(){return this.href},origin:{get:function(){return void 0!==t?t:o.origin?o.origin:o.protocol+"//"+o.hostname+(o.port?":"+o.port:"")},set:function(e){t=e}},href:d?null:{get:function(){return U()._href}},protocol:null,host:null,hostname:null,port:null,pathname:d?null:{get:function(){return U()._pathname}},search:d?null:{get:function(){return U()._search}},hash:d?null:{set:function(e){F(null,(""+e).replace(/^(#|)/,"#"),!1,x)},get:function(){return U()._hash}}};function M(){}function U(e,t,n){if(null==e||""===e||t)e=t?e:o.href,d&&!n||(e=e.replace(/^[^#]*/,"")||"#",e=o.protocol.replace(/:.*$|$/,":")+"//"+o.host+R.basepath+e.replace(new RegExp("^#[/]?(?:"+R.type+")?"),""));else{var a=U(),s=r.getElementsByTagName("base")[0];!n&&s&&s.getAttribute("href")&&(s.href=s.href,a=U(s.href,null,!0));var i=a._pathname,l=a._protocol;e=/^(?:\w+\:)?\/\//.test(e=""+e)?0===e.indexOf("/")?l+e:e:l+"//"+a._host+(0===e.indexOf("/")?e:0===e.indexOf("?")?i+e:0===e.indexOf("#")?i+a._search+e:i.replace(/[^\/]+$/g,"")+e)}T.href=e;var c=/(?:([a-zA-Z0-9\-]+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(T.href),u=c[2]+(c[3]?":"+c[3]:""),h=c[4]||"/",p=c[5]||"",f="#"===c[6]?"":c[6]||"",g=h+p+f,E=h.replace(new RegExp("^"+R.basepath,"i"),R.type)+p;return{_href:c[1]+"//"+u+g,_protocol:c[1],_host:u,_hostname:c[2],_port:c[3]||"",_pathname:h,_search:p,_hash:f,_relative:g,_nohash:E,_special:E+f}}function H(t){return t&&e&&e.EventTarget&&"function"==typeof e.EventTarget.prototype.addEventListener&&"function"==typeof t.bind?t.bind(e):t}function N(t,n,r,a){var i=0;r||(r={set:M},i=1);var o=!r.set,l=!r.get,c={configurable:!0,set:function(){o=1},get:function(){l=1}};try{f(t,n,c),t[n]=t[n],f(t,n,r)}catch(e){}if(!(o&&l||(t.__defineGetter__&&(t.__defineGetter__(n,c.get),t.__defineSetter__(n,c.set),t[n]=t[n],r.get&&t.__defineGetter__(n,r.get),r.set&&t.__defineSetter__(n,r.set)),o&&l))){if(i)return!1;if(t===e){try{var u=t[n];t[n]=null}catch(e){}if("execScript"in e)e.execScript("Public "+n,"VBScript"),e.execScript("var "+n+";","JavaScript");else try{f(t,n,{value:M})}catch(e){"onpopstate"===n&&(y("popstate",r=function(){_("popstate",r,!1);var e=t.onpopstate;t.onpopstate=null,setTimeout((function(){t.onpopstate=e}),1)},!1),C=0)}t[n]=u}else try{try{var h=s.create(t);for(var d in f(s.getPrototypeOf(h)===t?h:t,n,r),t)"function"==typeof t[d]&&(h[d]=t[d].bind(t));try{a.call(h,h,t)}catch(e){}t=h}catch(e){f(t.constructor.prototype,n,r)}}catch(e){return!1}}return t}function $(e,t,n){return e=e===D?o:e,(n=n||{}).set=n.set||function(n){e[t]=n},n.get=n.get||function(){return e[t]},n}function G(t,n){var r=(""+("string"==typeof t?t:t.type)).replace(/^on/,""),a=S[r];if(a){if(null==(n="string"==typeof t?n:t).target)for(var s=["target","currentTarget","srcElement","type"];t=s.pop();)n=N(n,t,{get:"type"===t?function(){return r}:function(){return e}});C&&(("popstate"===r?e.onpopstate:e.onhashchange)||M).call(e,n);for(var i=0,o=a.length;i<o;i++)a[i].call(e,n);return!0}return w(t,n)}function B(){var e=r.createEvent?r.createEvent("Event"):r.createEventObject();e.initEvent?e.initEvent("popstate",!1,!1):e.type="popstate",e.state=c.state,G(e)}function F(e,t,n,r){if(d)x=o.href;else{0===P&&(P=2);var a=U(t,2===P&&-1!==(""+t).indexOf("#"));a._relative!==U()._relative&&(x=r,n?o.replace("#"+a._special):o.hash=a._special)}!p&&e&&(A[o.href]=e),O=!1}function V(t){var n=x;if(x=o.href,n){L!==o.href&&B(),t=t||e.event;var r=U(n,!0),a=U();t.oldURL||(t.oldURL=r._href,t.newURL=a._href),r._hash!==a._hash&&G(t)}}function W(e){setTimeout((function(){y("popstate",(function(e){L=o.href,p||(e=N(e,"state",{get:function(){return c.state}})),G(e)}),!1)}),0),!d&&!0!==e&&"location"in c&&(X(g.hash),O&&(O=!1,B()))}function z(t){var n=t||e.event,r=function(e){for(;e;){if("A"===e.nodeName)return e;e=e.parentNode}}(n.target||n.srcElement),a="defaultPrevented"in n?n.defaultPrevented:!1===n.returnValue;if(r&&"A"===r.nodeName&&!a){var s=U(),i=U(r.getAttribute("href",2));s._href.split("#").shift()===i._href.split("#").shift()&&i._hash&&(s._hash!==i._hash&&(g.hash=i._hash),X(i._hash),n.preventDefault?n.preventDefault():n.returnValue=!1)}}function X(t){var n=r.getElementById(t=(t||"").replace(/^#/,""));if(n&&n.id===t&&"A"===n.nodeName){var s=n.getBoundingClientRect();e.scrollTo(a.scrollLeft||0,s.top+(a.scrollTop||0)-(a.clientTop||0))}}return function(){var t=r.getElementsByTagName("script"),n=(t[t.length-1]||{}).src||"";(-1!==n.indexOf("?")?n.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,(function(e,t,n){R[t]=(n||"").replace(/^(0|false)$/,"")})),y(E+"hashchange",V,!1);var a=[D,g,I,e,q,c];p&&delete q.state;for(var s=0;s<a.length;s+=2)for(var l in a[s])if(a[s].hasOwnProperty(l))if("object"!=typeof a[s][l])a[s+1][l]=a[s][l];else{var u=$(a[s],l,a[s][l]);if(!N(a[s+1],l,u,(function(t,n){n===c&&(e.history=c=a[s+1]=t)})))return _(E+"hashchange",V,!1),!1;a[s+1]===e&&(S[l]=S[l.substr(2)]=[])}return c.setup(),R.redirect&&c.redirect(),R.init&&(P=1),!p&&i&&function(){var t;try{(t=e.sessionStorage).setItem("__historyAPI__t","1"),t.removeItem("__historyAPI__t")}catch(e){t={getItem:function(e){var t=r.cookie.split(e+"=");return t.length>1&&t.pop().split(";").shift()||"null"},setItem:function(e,t){var n={};(n[o.href]=c.state)&&(r.cookie=e+"="+i.stringify(n))}}}try{A=i.parse(t.getItem("__historyAPI__"))||{}}catch(e){A={}}y(E+"unload",(function(){t.setItem("__historyAPI__",i.stringify(A))}),!1)}(),d||r[v](E+"click",z,!1),"complete"===r.readyState?W(!0):(d||U()._relative===R.basepath||(O=!0),y(E+"load",W,!1)),!0}()?(c.emulate=!d,e[v]=function(e,t,n){e in S?S[e].push(t):arguments.length>3?y(e,t,n,arguments[3]):y(e,t,n)},e[m]=function(e,t,n){var r=S[e];if(r){for(var a=r.length;a--;)if(r[a]===t){r.splice(a,1);break}}else _(e,t,n)},e[b]=G,c):void 0}()})),n={};
/*! (c) Andrea Giammarchi - ISC */try{n.EventTarget=(new EventTarget).constructor}catch(e){!function(e,t){var r=e.create,a=e.defineProperty,s=i.prototype;function i(){t.set(this,r(null))}function o(e,t,n){a(e,t,{configurable:!0,writable:!0,value:n})}function l(e){var t=e.options;t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"==typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this)}o(s,"addEventListener",(function(e,n,r){for(var a=t.get(this),s=a[e]||(a[e]=[]),i=0,o=s.length;i<o;i++)if(s[i].listener===n)return;s.push({target:this,listener:n,options:r})})),o(s,"dispatchEvent",(function(e){var n=t.get(this)[e.type];return n&&(o(e,"target",this),o(e,"currentTarget",this),n.slice(0).forEach(l,e),delete e.currentTarget,delete e.target),!0})),o(s,"removeEventListener",(function(e,n){for(var r=t.get(this),a=r[e]||(r[e]=[]),s=0,i=a.length;s<i;s++)if(a[s].listener===n)return void a.splice(s,1)})),n.EventTarget=i}(Object,new WeakMap)}var r=n.EventTarget;function a(e){return e.filter((function(e){return!document.querySelector('script[src="'+e+'"]')}))}function s(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.setAttribute("type","text/javascript"),r.addEventListener("load",t),r.addEventListener("error",n),document.getElementsByTagName("head")[0].appendChild(r)})}function i(e){return c(e,a,s)}function o(e){return e.filter((function(e){return!document.querySelector('link[rel="stylesheet"][href="'+e+'"]')}))}function l(e){return new Promise((t,n)=>{const r=document.createElement("link");r.setAttribute("href",e),r.setAttribute("rel","stylesheet"),r.addEventListener("load",t),r.addEventListener("error",n),document.getElementsByTagName("head")[0].appendChild(r)})}function c(e,t,n){return new Promise((r,a)=>{if((e=t(e)).length<=0)return void r();const s=e.length;let i=0;for(let t=0;t<e.length;t++)n(e[t]).then(()=>{i++,i>=s&&r()}).catch(a)})}const u=t.location||window.location,h={PREPARE:"prepare",PROGRESS:"progress",REQUESTED:"requested",RETRIEVED:"retrieved",RENDERED:"rendered",COMPLETE:"complete",CANCELLED:"cancelled",ERROR:"error"},d="",p="requested",f="loading",g="loaded",E="refreshing",v="error",m={selector:"a[data-uri],button[data-uri],[href][data-target]",allowPersistentTargets:!0,handleForms:!0,listenElement:document,minRefreshRate:500};class b extends r{constructor(e){super(),Object.assign(this,e)}get getResolvedTarget(){return this.targetElement instanceof Element?this.targetElement:I(this.targetElement||_.defaultTarget)}getRequestMethod(){return this.method||(this.data?e.POST:e.GET)}get getPushUrl(){return this.pushUrl||this.sourceElement&&this.sourceElement.getAttribute("href")||null}triggerEvent(e,t){const n=new CustomEvent(e,{detail:Object.assign({},t,{request:this}),bubbles:!0,cancelable:!0});return(this.triggerOnRequest?this:_.listenElement).dispatchEvent(n)}}class y{constructor(e){Object.assign(this,e)}}let _=Object.assign({},m),w=!1;function R(){return"complete"===document.readyState&&(k(I(_.defaultTarget),window.location.toString(),window.location.toString(),!0),_.listenElement.addEventListener("click",e=>{if(e.target instanceof Element){const t=e.target.closest(_.selector);t&&(e.preventDefault(),x(new b({url:t.getAttribute("data-uri")||t.getAttribute("href"),pushUrl:t.getAttribute("href"),sourceElement:t,targetElement:t.getAttribute("data-target")})))}}),_.listenElement.addEventListener("submit",e=>{_.handleForms&&e.target instanceof HTMLFormElement&&e.target.hasAttribute("data-uri")&&(T(e.target),e.preventDefault())}),L(),!0)}function T(t){const n=new FormData(t);let r=String(t.getAttribute("data-uri"));const a=new b({url:r,sourceElement:t,data:n,method:String(t.method)});t.method.toLowerCase()===e.GET&&(a.url=r+(r.indexOf("?")>-1?"&":"?")+[...n.entries()].map(e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(String(e[1]))}`).join("&"),a.pushUrl=a.url),x(a).catch(e=>console.log(e))}function x(t){return t instanceof b||(t=new b(t)),new Promise(n=>{const r=t.getResolvedTarget;A(r,p),r.pageletRequest&&r.pageletRequest.abort();const a=r.getAttribute("id")||"";if(t.triggerEvent(h.PREPARE)){if(!t.url||/^#/.test(t.url))return A(r,v),void t.triggerEvent(h.ERROR,{error:"invalid url"});O(r);const s=r.pageletRequest=new e(t.url);s.setWithCredentials(t.withCredentials).setMethod(t.getRequestMethod()).setHeaders({"x-requested-with":"XMLHttpRequest","x-pagelet-request":"1","x-pagelet-target":a,"x-pagelet-fragment":t.url.replace(/^.*?(#|$)/,"")}).setEventCallback(e=>{switch(e.type){case"loadstart":A(r,r.getAttribute("data-self-uri")===t.url?E:f);break;case"progress":t.triggerEvent(h.PROGRESS);break;case"abort":A(r,d),t.triggerEvent(h.CANCELLED);break;case"error":A(r,v),t.triggerEvent(h.ERROR)}}).setData(t.data),s.send().then(a=>{A(r,g);const s=function(e){const t=e.getResponseHeader("content-type");let[n]=t.split(";");const r=e.responseText.replace(/^while\(1\);|for\(;;\);|\)]}'/,""),a={status:e.status,statusText:e.statusText,headers:j(e.getAllResponseHeaders())};switch(n){case"":case"text/plain":case"text/html":return new y(Object.assign({content:r},a));case"application/json":case"application/javascript":return new y(Object.assign(JSON.parse(r),a));default:throw"not a valid response"}}(a),d={request:t,response:s};t.triggerEvent(h.RETRIEVED,d)&&function(t,n){const r=t.getResolvedTarget;n.hasOwnProperty("content")&&("object"==typeof n.content?(n.content[""]&&(r.innerHTML=n.content[""],t.getRequestMethod()===e.GET&&r.setAttribute("data-self-uri",t.url)),Object.keys(n.content).forEach(e=>{if(e){let t=_.listenElement.querySelector("#"+e);t&&(t.innerHTML=n.content[e])}})):(r.innerHTML=n.content,t.getRequestMethod()===e.GET&&r.setAttribute("data-self-uri",t.url)));n.hasOwnProperty("reloadPagelet")&&Object.keys(n.reloadPagelet).forEach(e=>{const t=n.reloadPagelet[e],r=_.listenElement.querySelector("#"+e);r&&x(new b({url:t||r.getAttribute("data-self-uri"),targetElement:e}))});return Promise.all([(a=n.resources&&n.resources.css||[],c(a,o,l)),i(n.resources&&n.resources.js||[])]).then(()=>{t.triggerEvent(h.RENDERED,{response:n})&&(L(r),function(e){if(e.hasAttribute("data-refresh")){O(e);const t=Math.max(_.minRefreshRate,e.getAttribute("data-refresh"));C.set(e,setTimeout(()=>P(e),t))}}(r))}).catch(()=>{A(r,v),t.triggerEvent(h.ERROR)});var a}(t,s).then(()=>{if(s.location)s.location.reloadWindow?s.location.replaceHistory?u.replace(s.location.url):u.assign(s.location.url):k(r,s.location.url,t.url,s.location.replaceHistory);else{let e=t.getPushUrl;e&&k(r,e,t.url,!1)}t.triggerEvent(h.COMPLETE,d)}),n(d)}).then(()=>{A(r,d)}),t.triggerEvent(h.REQUESTED)}})}function L(e){(e=e||_.listenElement).querySelectorAll("[data-self-uri]").forEach(e=>{e.pageletInitialized||(e.pageletInitialized=!0,P(e))})}const C=new Map;function O(e){C.has(e)&&clearTimeout(C.get(e))}function P(e){e.getAttribute("data-self-uri")&&x(new b({url:e.getAttribute("data-self-uri"),sourceElement:e,targetElement:e}))}function A(e,t){t?e.setAttribute("data-pagelet-state",t):e.removeAttribute("data-pagelet-state")}const S={};function k(e,n,r,a){if(n&&"#"===n)return;e.pageletId=e.pageletId||function(e){let t="";for(;t.length<e;)t+=parseInt(Math.random().toFixed(16).slice(2,19)).toString(36);return t.slice(0,e)}(36),S[e.pageletId]=e;const s={targetPageletId:e.pageletId,targetId:e.getAttribute("id"),pushUrl:n,ajaxUrl:r};a?t.replaceState(s,null,n):t.pushState(s,null,n)}function I(e){return e&&_.listenElement.querySelector("#"+e)||document.body}function j(e){const t={};return e.trim().split(/[\r\n]+/).forEach(e=>{const n=e.split(": "),r=n.shift();t[r]=n.join(": ")}),t}window.addEventListener("popstate",e=>{const t=e.state;if(t){let e;S[t.targetPageletId]&&_.listenElement.contains(S[t.targetPageletId])?e=S[t.targetPageletId]:_.allowPersistentTargets&&t.targetId&&(e=_.listenElement.querySelector("#"+t.targetId)),e?x(new b({url:t.ajaxUrl,targetElement:e})):u.replace(t.pushUrl)}});var q=Object.freeze({__proto__:null,events:h,Request:b,init:function(e={}){_=Object.assign({},m,e),w||(w=!0,R()||document.addEventListener("readystatechange",R))},formSubmit:T,load:x,refresh:P});window.Pagelets=q}();
